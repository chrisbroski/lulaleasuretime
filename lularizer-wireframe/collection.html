<!doctype html>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Add To Inventory</title>
<link rel="stylesheet" href="mdl/material.lime-pink.min.css">
<script src="mdl/material.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" type="text/css" href="mdl/mdl-custom.css">
<style>
#inventory img {width: 90px; margin: 4px; }
h3 {
    font-family: steelfish;
    text-transform: capitalize;
}
.selected {
    box-shadow: 2px 2px 8px black;
    position: relative;
    top: -1px; left: -1px;
}
</style>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">

<header class="mdl-layout__header">
<div class="mdl-layout__header-row">
<span class="mdl-layout__title"><a href="/lularizer-wireframe/">Add To Inventory</a></span>
</div>
</header>

<div class="mdl-layout__drawer">
<span class="mdl-layout__title">LuLaRizer</span>
<nav class="mdl-navigation">
<a class="mdl-navigation__link" href="new" onclick="location='new'; return false; ">Add From Camera</a>
<a class="mdl-navigation__link" href="#" onclick="location='collection'; return false; ">Add From Collection</a>
<a class="mdl-navigation__link" href="inventory" onclick="location='inventory'; return false; ">Browse Inventory</a>
<a class="mdl-navigation__link" href="#" onclick="location='audit'; return false; ">Inventory Audit</a>
<a class="mdl-navigation__link" href="#" onclick="location='upload'; return false; ">Upload to Facebook</a>
</nav>
</div>

<main class="mdl-layout__content" id="inventory"></main>

</div>

<script>

function getEventTarget(e) {
    var targ;
    targ = e.target || e.srcElement;
    if (targ.nodeType === 3) { // defeat Safari bug
        targ = targ.parentNode;
    }
    return targ;
}

function addEvent(el, evType, fn, bubble) {
    bubble = bubble || false;
    if (el.addEventListener) {
        el.addEventListener(evType, fn, bubble);
    } else if (el.attachEvent) {
        el.attachEvent("on" + evType, fn);
    }
}

function touchclick(el, func, bubble) {
    bubble = !!bubble;
    if ('ontouchstart' in window || 'onmsgesturechange' in window) {
        el.addEventListener('touchstart', func, bubble);
    } else {
        addEvent(el, 'click', func, bubble);
    }
}

function selectPhoto(e) {
    var targ = getEventTarget(e);
    location = 'edit?file=' + targ.src.slice(targ.src.lastIndexOf('/') + 1);
}

function addPhoto(path) {
    var invList = document.getElementById('inventory'),
        photo,
        img;

    img = document.createElement('img');
    img.src = path;
    invList.appendChild(img);
}

function loadPhotos() {
    addPhoto('album/IMG_0092.jpg');
    addPhoto('album/IMG_0094.jpg');
    addPhoto('album/IMG_0096.jpg');
    addPhoto('album/IMG_0104.jpg');
    addPhoto('album/IMG_0106.jpg');
    addPhoto('album/IMG_0204.jpg');
    addPhoto('album/IMG_0205.jpg');
    addPhoto('album/IMG_0206.jpg');
}

function load() {
    loadPhotos();
    var invList = document.getElementById('inventory');
    touchclick(invList, selectPhoto);
}

window.onload = load;
</script>
